# ドキュメント更新ルール

**CLAUDE.md = プロジェクトの記憶装置 - 必ず最新に保つ**

## 自己学習ルール（Anthropic社内ベストプラクティス）

**ユーザーから修正・指摘を受けたら、必ず以下を実行:**

```
「CLAUDE.mdを更新して、同じ失敗を二度と繰り返さないようにせよ」
```

具体的には：
1. **修正を受けたとき** → 「過去の失敗例と学び」セクションに追記
2. **ユーザーの好みが判明したとき** → 該当ルールに反映
3. **新しいパターンを発見したとき** → 「実践的な設計パターン」に追記

**Claudeは自分自身のためのルールを書くのが得意。積極的に活用せよ。**

---

## 実装品質の自己チェック

**中途半端な修正をしたと感じたら、自問せよ：**

```
「今知っていることを全て踏まえて、この実装を一からやり直すなら
 どうするか？もっとエレガントな方法はないか？」
```

妥協した実装に気づいたら、ユーザーに報告し、より良い方法を提案すること。

---

## セルフレビュー強化

**PRやコミット前に、自分自身を厳しくレビューせよ：**

```
この変更を厳しくレビューして、問題がないか確認せよ。
mainブランチとfeatureブランチの差分で、意図しない変更がないか検証せよ。
```

---

## 繰り返し作業のSkill化

**1日に2回以上行う作業を見つけたら、ユーザーにSkill化を提案せよ：**

```
例:
- テスト実行 → /test スラッシュコマンド
- 技術負債チェック → /techdebt スラッシュコマンド
- コードレビュー → /review スラッシュコマンド
```

---

## 更新が必要なタイミング

1. **新しい問題を発見したとき**
   - バグ、品質問題、ユーザーからの指摘
   - 必ず「日付」「問題」「解決策」「実装箇所」を記録

2. **重要な仕様変更をしたとき**
   - API仕様、データベーススキーマ、ロジック変更
   - 変更理由と影響範囲を明記

3. **デプロイ・修正を完了したとき**
   - 実装した機能、修正したバグを「最新アップデート」に追加

4. **ユーザーから修正・指摘を受けたとき**（自己学習）
   - 失敗パターンを記録し、再発防止ルールを追加

---

## 更新テンプレート

```markdown
## 最新アップデート

### [機能名/問題名]（YYYY-MM-DD）

**問題**: [何が起きたか]
- 具体的な症状
- 発生条件

**原因**: [技術的な原因]

**解決策**:
// 修正前
const bad = "問題のあるコード"

// 修正後
const good = "修正後のコード"

**実装箇所**: `path/to/file.ts:123`

**効果**: [何が改善されたか]
```
